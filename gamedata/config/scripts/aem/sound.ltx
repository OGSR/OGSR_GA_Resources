[logic]
active = sr_idle@wait_start

[sr_idle@wait_start]
on_info = {+bar_arena_fight} sr_idle@intro

[sr_idle@intro]
on_info = {=aem_intro(fight1)} ph_sound@intro_fight1, {=aem_intro(fight2)} ph_sound@intro_fight2, {=aem_intro(fight3)} ph_sound@intro_fight3, {=aem_intro(fight4)} ph_sound@intro_fight4, {=aem_intro(fight5)} ph_sound@intro_fight5, {=aem_intro(fight6)} ph_sound@intro_fight6, {=aem_intro(fight8)} ph_sound@intro_fight8, {=aem_intro(pseudodog)} ph_sound@intro_pseudodog, {=aem_intro(snork)} ph_sound@intro_snork, {=aem_intro(bloodsucker)} ph_sound@intro_bloodsucker, {=aem_intro(burer)} ph_sound@intro_burer, {=aem_intro(savage)} ph_sound@intro_savage, {-aem_stake1 -aem_stake2 -aem_stake3} ph_sound@intro_fight, sr_idle@intro_def

[sr_idle@intro_def]
on_game_timer = 35| ph_sound@intro_def

[ph_sound@intro_def]
snd = aem_fight_begin
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_fight]
snd = arena_fight_begin
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_fight1]
snd = bar_arena_fight_1
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_fight2]
snd = bar_arena_fight_2
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_fight3]
snd = bar_arena_fight_3
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_fight4]
snd = bar_arena_fight_4
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_fight5]
snd = bar_arena_fight_5
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_fight6]
snd = bar_arena_fight_6
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_fight8]
snd = aem_special
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_pseudodog]
snd = aem_pseudodog
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_snork]
snd = aem_snork
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_bloodsucker]
snd = aem_bloodsucker
on_signal = sound_end | sr_idle@wait

[ph_sound@intro_burer]
snd = aem_burer
on_signal = sound_end | sr_idle@wait
on_info = {+aem_fight_done} sr_idle@wait_done

[ph_sound@intro_savage]
snd = aem_beast
on_signal = sound_end | sr_idle@wait

[sr_idle@wait]
on_info = {-aem_bonus} sr_idle@wait_notime, sr_idle@wait_time

[sr_idle@wait_notime]
on_info = {+aem_fight_done} sr_idle@wait_done

[sr_idle@wait_time]
on_info = {+aem_fight_done} sr_idle@wait_done, {+aem_5s} ph_sound@5_sec, {+aem_10s} ph_sound@10_sec, {+aem_15s} ph_sound@15_sec, {+aem_20s} ph_sound@20_sec, {+aem_30s} ph_sound@30_sec, {+aem_40s} ph_sound@40_sec, {+aem_50s} ph_sound@50_sec

[sr_idle@wait_done]
on_info = {=actor_dead} sr_idle@gameover, {+aem_timeover +aem_fight_foul} sr_idle@foul, {+aem_timeover -aem_fight_foul} ph_sound@timeover, sr_idle@extro

[ph_sound@5_sec]
on_signal = sound_end | sr_idle@wait_time
on_info = {+aem_fight_done} sr_idle@wait_done

[ph_sound@10_sec]
snd = arena_fight_10_sec
on_signal = sound_end | sr_idle@wait_time
on_info = {+aem_fight_done} sr_idle@wait_done

[ph_sound@15_sec]
on_signal = sound_end | sr_idle@wait_time
on_info = {+aem_fight_done} sr_idle@wait_done

[ph_sound@20_sec]
snd = arena_fight_20_sec
on_signal = sound_end | sr_idle@wait_time
on_info = {+aem_fight_done} sr_idle@wait_done

[ph_sound@30_sec]
snd = arena_fight_30_sec
on_signal = sound_end | sr_idle@wait_time
on_info = {+aem_fight_done} sr_idle@wait_done

[ph_sound@40_sec]
snd = arena_fight_40_sec
on_signal = sound_end | sr_idle@wait_time
on_info = {+aem_fight_done} sr_idle@wait_done

[ph_sound@50_sec]
snd = arena_fight_50_sec
on_signal = sound_end | sr_idle@wait_time
on_info = {+aem_fight_done} sr_idle@wait_done

[sr_idle@extro]
on_info = {=aem_extro(fight1)} ph_sound@extro_fight1, {=aem_extro(fight2)} ph_sound@extro_fight2, {=aem_extro(fight3)} ph_sound@extro_fight3, {=aem_extro(fight4)} ph_sound@extro_fight4, {=aem_extro(fight5)} ph_sound@extro_fight5, {=aem_extro(fight6)} ph_sound@extro_fight6, {=aem_extro(fight7)} ph_sound@extro_fight7, {-aem_stake1 -aem_stake2 -aem_stake3} ph_sound@extro_fight, ph_sound@extro_def

[ph_sound@extro_def]
snd = aem_victory
on_signal = sound_end | sr_idle@pause

[ph_sound@extro_fight]
snd = arena_fight_victory_notime
on_signal = sound_end | sr_idle@pause

[ph_sound@extro_fight1]
snd = bar_arena_fight_1_end
on_signal = sound_end | sr_idle@pause

[ph_sound@extro_fight2]
snd = bar_arena_fight_2_end
on_signal = sound_end | sr_idle@pause

[ph_sound@extro_fight3]
snd = aem_no_chance
on_signal = sound_end | sr_idle@pause

[ph_sound@extro_fight4]
snd = bar_arena_fight_4_end
on_signal = sound_end | sr_idle@pause

[ph_sound@extro_fight5]
snd = bar_arena_fight_5_end
on_signal = sound_end | sr_idle@pause

[ph_sound@extro_fight6]
snd = bar_arena_fight_6_end
on_signal = sound_end | sr_idle@pause

[ph_sound@extro_fight7]
snd = bar_arena_fight_7_end
on_signal = sound_end | sr_idle@pause

[sr_idle@pause]
on_game_timer = 30 | sr_idle@done
on_info = {=actor_dead} sr_idle@gameover

[sr_idle@gameover]
on_info = ph_sound@gameover %=aem_foul%

[ph_sound@gameover]
snd = arena_fight_death
on_signal = sound_end | nil

[ph_sound@timeover]
snd = aem_out_of_time
on_signal = sound_end | sr_idle@timeover_pause
on_info = {=actor_dead} sr_idle@gameover, {+aem_fight_foul} sr_idle@foul

[sr_idle@foul]
on_info = ph_sound@foul %=aem_win%

[ph_sound@foul]
snd = aem_foul
on_signal = sound_end | sr_idle@timeover_pause %=aem_foul%
on_info = {=actor_dead} sr_idle@gameover

[sr_idle@timeover_pause]
on_game_timer = 30 | sr_idle@done
on_info = {=actor_dead} sr_idle@gameover, {+aem_fight_foul} sr_idle@done %=aem_foul%

[sr_idle@done]
on_game_timer = 20 | sr_idle@wait_start %=aem_finish%